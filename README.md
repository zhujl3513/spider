# 项目简介 spider-dongfang

## 东方财富网股票财务数据爬虫
这是一个基于Python的股票财务数据爬虫工具，专门用于从东方财富网获取主板、创业板和科创板股票的财务数据和市场指标。工具提供了完整的数据采集、处理和保存功能，支持批量获取和自定义股票查询两种模式。


## 功能特点

- 支持主板、创业板、科创板三大市场股票数据获取
- 提供完整股票列表和详细财务指标
- 支持自定义股票代码或名称查询
- 自动分页获取所有股票数据
- 数据导出为CSV和Excel格式
- 随机延迟请求，避免被反爬机制限制

## 环境要求

- Python 3.13.5
- Ubuntu 24.04 (也支持Windows系统)
- 稳定的网络连接

## 安装部署

### 1. 克隆或下载项目文件

将项目文件下载到本地目录：

```bash
mkdir stock_crawler && cd stock_crawler
# 将爬虫通讯6.py文件放置在此目录下
```

### 2. 创建Python虚拟环境（推荐）

```bash
# 安装虚拟环境工具（如果尚未安装）
sudo apt install python3-venv

# 创建虚拟环境
python3 -m venv venv

# 激活虚拟环境
source venv/bin/activate
```

### 3. 安装依赖库

创建requirements.txt文件，内容如下：

```txt
requests>=2.31.0
pandas>=2.0.0
openpyxl>=3.1.0
```

然后安装依赖：

```bash
pip install -r requirements.txt
```

### 4. 运行程序

```bash
python spider.py
```

## 使用说明

### 模式选择

程序启动后会提供两种模式选择：

1. **全市场爬取模式**：爬取主板、创业板、科创板的所有股票数据
2. **自定义查询模式**：输入特定股票代码或名称进行查询

### 数据输出

程序会自动创建`stock_data04`目录，并将数据保存为以下格式：
- 各市场单独CSV文件：`主板_财务数据_时间戳.csv`
- 所有市场汇总Excel文件：`所有市场股票财务数据_时间戳.xlsx`

### 数据字段

爬取的数据包括：
- 基础信息：股票代码、名称、上市日期等
- 市场指标：最新价、涨跌幅、成交量、成交额等
- 财务指标：每股收益、净资产收益率、净利润增长率等
- 详细财务数据：营业收入、净利润、总资产、股东权益等

## 编译为可执行文件

### 在Ubuntu系统上编译

1. 安装PyInstaller：

```bash
pip install pyinstaller
```

2. 编译为Linux可执行文件：

```bash
pyinstaller --onefile --name stock_crawler spider6.py
```

3. 编译后的可执行文件位于`dist/`目录下

### 在Windows系统上编译

1. 安装Python和PyInstaller（步骤同上）
2. 使用命令提示符或PowerShell执行：

```bat
pyinstaller --onefile --name stock_crawler.exe spider6.py
```

3. 编译后的EXE文件位于`dist/`目录下

### 注意事项

- 编译时需要确保所有依赖库已正确安装
- 编译后的文件可能较大（因为包含了Python解释器和所有依赖）
- 在Windows上编译时，可能需要安装Microsoft Visual C++ Redistributable

## 常见问题与解决方案

### 1. 网络连接问题

如果遇到网络连接错误，请检查：
- 网络连接是否正常
- 防火墙设置是否阻止了Python的网络访问
- 是否使用了代理服务器（需要配置代理）

### 2. 数据获取失败

如果数据获取失败，可能是由于：
- 东方财富网接口变更（需要更新代码中的API地址）
- 请求频率过高被暂时限制（增加延迟时间）
- 网站维护或更新（稍后重试）

### 3. 编码问题

如果遇到中文乱码问题：
- 确保系统支持UTF-8编码
- 在代码中明确指定编码格式为`utf_8_sig`

### 4. 内存不足

处理大量数据时可能遇到内存不足问题：
- 增加系统虚拟内存
- 分批次处理数据，减少单次处理量

## 免责声明

本工具仅用于学习和研究目的，请勿用于商业用途或大量频繁请求以免对目标网站造成负担。使用本工具产生的任何后果由使用者自行承担。

## 更新日志

- 2024-08-27: 初始版本发布，支持主板、创业板、科创板数据爬取

## 技术支持

如遇到问题，请检查：
1. Python版本是否为3.13.5
2. 所有依赖库是否已正确安装
3. 网络连接是否正常
4. 目标网站是否可以正常访问

如果问题仍无法解决，请提供详细的错误信息以便进一步分析。
